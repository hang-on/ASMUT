; Macros.asm
; nit testing macros.

; -----------------------------------------------------------------------------
.macro assertEqualsA ; (value, fail string)
; -----------------------------------------------------------------------------
  push af
  cp \1
  jp z,+
  failTest \2
  +:
  pop af
.endm

; -----------------------------------------------------------------------------
.macro assertNotEqualsA ; (value, fail string)
; -----------------------------------------------------------------------------
  push af
  cp \1
  jp nz,+
  failTest \2
  +:
  pop af
.endm

; -----------------------------------------------------------------------------
.macro assertEqualsHL ; (value, fail string)
; -----------------------------------------------------------------------------
  push de
  push af
  ld de,\1
  ld a,d
  cp h
  jp nz,+
  ld a,e
  cp l
  jp z,++
  +:
    failTest \2
  ++:
  pop af
  pop de
.endm

; -----------------------------------------------------------------------------
.macro assertEqualsByte ; (byte-sized variable, value, fail string)
; -----------------------------------------------------------------------------
  push af
  push bc
  ld a,(\1)
  ld b,\2
  cp b
  jp z,+
    failTest \3
  +:
  pop bc
  pop af
.endm

; -----------------------------------------------------------------------------
.macro assertCarrySet ; (fail string)
; -----------------------------------------------------------------------------
  jp c,+
    failTest \1
  +:
.endm

; -----------------------------------------------------------------------------
.macro assertCarryReset ; (fail string)
; -----------------------------------------------------------------------------
  jp nc,+
    failTest \1
  +:
.endm

; -----------------------------------------------------------------------------
.macro failTest ; (fail string)
; -----------------------------------------------------------------------------
  _Fail__\1:
    jr -2
.endm
